$if(graphics)$
% \usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother

% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
$endif$

\makeatletter
\setlength{\@fptop}{5pt} % Set distance from top of page to first float
\makeatother

% Set captions and legends -----

\DeclareCaptionFont{ABNTEXfontereduzida}{\ABNTEXfontereduzida}

\captionsetup{
  font=ABNTEXfontereduzida,
  justification=centering
}

\renewcommand{\abovecaptionskip}{\tinyskipamount}
\renewcommand{\belowcaptionskip}{\tinyskipamount}

\renewcommand{\legend}[1]{
  \ABNTEXfontereduzida
  \addvspace{\tinyskipamount}
  #1
}

% Set figure environment -----

\AtBeginEnvironment{figure}{
  \ABNTEXfontereduzida
  \addvspace{\tinyskipamount}
}

\AtEndEnvironment{figure}{
  \addvspace{\smallskipamount}
}
